"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react");function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=t(e);function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i.apply(this,arguments)}function l(e,t){if(null==e)return{};var r,n,u=function(e,t){if(null==e)return{};var r,n,u={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(u[r]=e[r]);return u}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(u[r]=e[r])}return u}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,u,a=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){l=!0,u=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw u}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var f=e.createContext(),s=["children"],d=function(e){var t=e.children,n=l(e,s);return r.default.createElement("button",n,t)},v=["children","id"],m=["children"],p=["fieldType","name"],b={datalist:function(e){var t=e.children,n=e.id,u=l(e,v),a="".concat(n,"s");return r.default.createElement(r.default.Fragment,null,r.default.createElement("input",i({list:a,id:n},u)),r.default.createElement("datalist",{id:a},t))},input:function(e){return r.default.createElement("input",e)},select:function(e){var t=e.children,n=l(e,m);return r.default.createElement("select",n,t)},textarea:function(e){return r.default.createElement("textarea",e)}},y=function(t){var r=t.initialValues,n=t.onSubmit,i=t.initialTouched,l=void 0===i?{}:i,c=t.initialErrors,f=void 0===c?{}:c,s=t.initialIsValid,d=void 0===s||s,v=t.runInitialValidation,m=void 0!==v&&v,p=t.validate,b=t.validateOnChange,y=void 0===b||b,h=t.validateOnBlur,O=void 0===h||h,g=o(e.useState(r),2),j=g[0],E=g[1],S=o(e.useState(f),2),w=S[0],P=S[1],x=o(e.useState(l),2),C=x[0],F=x[1],A=o(e.useState(d),2),I=A[0],V=A[1],k=o(e.useState(0),2),D=k[0],B=k[1],T=e.useRef(null),M=e.useRef(null),R=function(){if(!p)return!0;var e=p(j);return P(e),!!Object.keys(e).length};e.useEffect((function(){var e=!!Object.keys(w).length;V(e)}),[w]),e.useEffect((function(){m&&R()}),[]),e.useEffect((function(){y&&T.current&&R(),T||(T.current=!0)}),[j]),e.useEffect((function(){O&&M.current&&R(),M||(M.current=!0)}),[C]);var _=function(e){var t=e.name,r=e.value,n=u(u({},j),{},a({},t,r));E(n)},q=function(){E(r),P(f),F(l)};return{values:j,errors:w,touched:C,handleChange:function(e){var t=e.target,r=t.name,n=t.value;_({name:r,value:n})},setFieldValue:function(e){var t=e.name,r=e.value;_({name:t,value:r})},setValues:E,handleBlur:function(e){var t=e.target.name;C[t]||F((function(e){return u(u({},e),{},a({},t,!0))}))},validateForm:R,isValid:I,handleSubmit:function(e){e&&e.preventDefault(),B((function(e){return e+1})),F(Object.keys(j).reduce((function(e,t){return u(u({},e),{},a({},t,!0))}),{})),R()&&(n(j),q())},formSubmitCount:D,resetForm:q}},h=["children"];exports.Field=function(t){var n=t.fieldType,a=void 0===n?"input":n,i=t.name,o=l(t,p),c=e.useContext(f),s=c.values,v=c.handleChange,m=c.handleBlur;if("button"===a)return r.default.createElement(d,o);var y=s[i],h=b[a];return r.default.createElement(h,u(u({},o),{},{name:i,value:y,onChange:v,onBlur:m,id:i}))},exports.Form=function(e){var t=e.children,n=l(e,h),u=y(n),a=u.handleSubmit;return console.log(u),r.default.createElement(f.Provider,{value:u},r.default.createElement("form",{onSubmit:a},t(u)))},exports.FormContext=f,exports.useForm=y;
